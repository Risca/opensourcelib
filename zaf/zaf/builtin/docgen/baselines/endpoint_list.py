expected_rst_output = """
.. _list-endpoints:

*****************
List of Endpoints
*****************

.. _endpoint-e1:

E1
==

e1 description


:ref:`message-m1`:
    m1 description

:ref:`message-m3`:
    m3 description
    continues


.. _endpoint-e2:

E2
==

e1 description
continues

e1 extended description


:ref:`message-m2`:
    m2 description

:ref:`message-m3`:
    m3 description
    continues

"""
